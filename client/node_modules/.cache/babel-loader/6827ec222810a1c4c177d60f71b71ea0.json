{"ast":null,"code":"import _regeneratorRuntime from\"/home/nihara/Documents/GitHub/emaily-server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/nihara/Documents/GitHub/emaily-server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/nihara/Documents/GitHub/emaily-server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{Table}from\"react-bootstrap\";import\"./Home.css\";import Nav from'../Navigationbar/Navigationbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mails=_useState2[0],setMails=_useState2[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(props);_context.next=3;return axios({method:'GET',url:'http://localhost:3000/api/emails/scheduled',headers:{authorization:\"BEARER \".concat(props.token)}});case 3:res=_context.sent;console.log(res.data);if(res.data.success){setMails(res.data.emails);}case 6:case\"end\":return _context.stop();}}},_callee);})),[]);//Filtering mails based on count. if count>0, then it is already sent.\n//Only those mails are needed to be displayed\n//const home_mail = mail.filter((data, index) => data.count == 0);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"h2\",{className:\"heading\",children:\"Home\"}),/*#__PURE__*/_jsxs(Table,{hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"To\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"To be sent on\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:mails.map(function(data,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/selectedmailhome\",children:/*#__PURE__*/_jsx(\"button\",{children:index+1})})}),/*#__PURE__*/_jsx(\"td\",{children:data.recipients.map(function(data,index){return/*#__PURE__*/_jsxs(\"div\",{children:[data,\" \"]},index);})}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:data.subject}),/*#__PURE__*/_jsx(\"td\",{children:function(){if(data.type==\"weekly\"){return/*#__PURE__*/_jsxs(\"div\",{children:[data.schedule.day,\",  \",data.schedule.time]});}else if(data.type==\"monthly\"){return/*#__PURE__*/_jsxs(\"div\",{children:[data.schedule.date,\",  \",data.schedule.time]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[data.schedule.date,\"/\",data.schedule.month,\",  \",data.schedule.time]});}}()})]},index);})})]})]});}","map":{"version":3,"sources":["/home/nihara/Documents/GitHub/emaily-server/client/src/components/Home/Home.js"],"names":["axios","React","useEffect","useState","Table","Nav","Home","props","mails","setMails","console","log","method","url","headers","authorization","token","res","data","success","emails","map","index","recipients","subject","type","schedule","day","time","date","month"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,KAAT,KAAsB,iBAAtB,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,GAAP,KAAgB,gCAAhB,C,wFAEA,cAAe,SAASC,CAAAA,IAAT,CAAcC,KAAd,CAAqB,CAElC,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eAEAP,SAAS,sEAAC,2IACRQ,OAAO,CAACC,GAAR,CAAYJ,KAAZ,EADQ,sBAEUP,CAAAA,KAAK,CAAC,CACtBY,MAAM,CAAE,KADc,CAEtBC,GAAG,CAAE,4CAFiB,CAGtBC,OAAO,CAAE,CACPC,aAAa,kBAAYR,KAAK,CAACS,KAAlB,CADN,CAHa,CAAD,CAFf,QAEFC,GAFE,eASRP,OAAO,CAACC,GAAR,CAAYM,GAAG,CAACC,IAAhB,EACA,GAAGD,GAAG,CAACC,IAAJ,CAASC,OAAZ,CAAqB,CACnBV,QAAQ,CAACQ,GAAG,CAACC,IAAJ,CAASE,MAAV,CAAR,CACD,CAZO,sDAAD,GAaN,EAbM,CAAT,CAeA;AACA;AACA;AAEA,mBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,KAAC,GAAD,IADF,cAEE,WAAI,SAAS,CAAC,SAAd,kBAFF,cAGE,MAAC,KAAD,EAAO,KAAK,KAAZ,wBACE,oCACE,mCACE,yBADF,cAEE,0BAFF,cAGE,+BAHF,cAIE,aAJF,cAKE,aALF,cAME,qCANF,GADF,EADF,cAWE,uBACGZ,KAAK,CAACa,GAAN,CAAU,SAACH,IAAD,CAAOI,KAAP,qBACT,mCACE,iCAAI,UAAG,IAAI,CAAC,mBAAR,uBAA4B,wBAASA,KAAK,CAAG,CAAjB,EAA5B,EAAJ,EADF,cAEE,oBACGJ,IAAI,CAACK,UAAL,CAAgBF,GAAhB,CAAoB,SAACH,IAAD,CAAOI,KAAP,qBACnB,uBAAkBJ,IAAlB,OAAUI,KAAV,CADmB,EAApB,CADH,EAFF,cAOE,WAAI,OAAO,CAAC,GAAZ,UAAiBJ,IAAI,CAACM,OAAtB,EAPF,cAQE,oBACI,UAAM,CACN,GAAIN,IAAI,CAACO,IAAL,EAAa,QAAjB,CAA2B,CACzB,mBACE,uBACGP,IAAI,CAACQ,QAAL,CAAcC,GADjB,CAEG,KAFH,CAGGT,IAAI,CAACQ,QAAL,CAAcE,IAHjB,GADF,CAOD,CARD,IAQO,IAAIV,IAAI,CAACO,IAAL,EAAa,SAAjB,CAA4B,CACjC,mBACE,uBACGP,IAAI,CAACQ,QAAL,CAAcG,IADjB,CAEG,KAFH,CAGGX,IAAI,CAACQ,QAAL,CAAcE,IAHjB,GADF,CAOD,CARM,IAQA,CACL,mBACE,uBACGV,IAAI,CAACQ,QAAL,CAAcG,IADjB,CAEG,GAFH,CAGGX,IAAI,CAACQ,QAAL,CAAcI,KAHjB,CAIG,KAJH,CAKGZ,IAAI,CAACQ,QAAL,CAAcE,IALjB,GADF,CASD,CACF,CA5BA,EADH,EARF,GAASN,KAAT,CADS,EAAV,CADH,EAXF,GAHF,GADF,CA+DD","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Table } from \"react-bootstrap\";\nimport \"./Home.css\";\nimport Nav from '../Navigationbar/Navigationbar'\n\nexport default function Home(props) {\n\n  const [mails, setMails] = useState([]);\n\n  useEffect(async () => {\n    console.log(props);\n    const res = await axios({\n      method: 'GET',\n      url: 'http://localhost:3000/api/emails/scheduled',\n      headers: {\n        authorization: `BEARER ${props.token}`\n      }\n    });\n    console.log(res.data);\n    if(res.data.success) {\n      setMails(res.data.emails)\n    }\n  }, [])\n\n  //Filtering mails based on count. if count>0, then it is already sent.\n  //Only those mails are needed to be displayed\n  //const home_mail = mail.filter((data, index) => data.count == 0);\n\n  return (\n    <div className=\"container-fluid\">\n      <Nav />\n      <h2 className=\"heading\">Home</h2>\n      <Table hover>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>To</th>\n            <th>Subject</th>\n            <th></th>\n            <th></th>\n            <th>To be sent on</th>\n          </tr>\n        </thead>\n        <tbody>\n          {mails.map((data, index) => (\n            <tr key={index}>\n              <td><a href=\"/selectedmailhome\"><button>{index + 1}</button></a></td>\n              <td>\n                {data.recipients.map((data, index) => (\n                  <div key={index}>{data} </div>\n                ))}\n              </td>\n              <td colSpan=\"3\">{data.subject}</td>\n              <td>\n                {(() => {\n                  if (data.type == \"weekly\") {\n                    return (\n                      <div>\n                        {data.schedule.day}\n                        {\",  \"}\n                        {data.schedule.time}\n                      </div>\n                    );\n                  } else if (data.type == \"monthly\") {\n                    return (\n                      <div>\n                        {data.schedule.date}\n                        {\",  \"}\n                        {data.schedule.time}\n                      </div>\n                    );\n                  } else {\n                    return (\n                      <div>\n                        {data.schedule.date}\n                        {\"/\"}\n                        {data.schedule.month}\n                        {\",  \"}\n                        {data.schedule.time}\n                      </div>\n                    );\n                  }\n                })()}\n              </td>\n            </tr>\n            \n          ))}\n        </tbody>\n      </Table>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}